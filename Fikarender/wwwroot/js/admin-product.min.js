function getTags(n,t){preloader();$("#tag-modal #prdId").val(n);$.post("/admin/get-product-tags",{id:n},function(n){var i=n.allTags,r=n.currentTags;console.log(i);console.log(r);$("#tag-modal h3").text("برچسب های محصول ("+t+")");$("#currentTags ul").html("");$.each(r,function(n,t){var i='<li><span class="far fa-times-circle pointer" data-id="'+t.productTagId+'" onclick="removeTag(this)" ><\/span><span class="xs uk-margin-small-right">'+t.tagName+"<\/span><\/li>";$("#currentTags ul").append(i)});$("#allTags").html("");$("#allTags").append('<option value="0">----<\/option>');$.each(i,function(n,t){var i='<option value="'+t.id+'">'+t.name+"<\/option>";$("#allTags").append(i)});UIkit.modal("#tag-modal").show()},"json").then(function(){preloader()})}function removeTag(n){preloader();var t=$(n).data("id");$.post("/admin/remove-product-tag",{id:t},function(t){t==!0?$(n).parent().fadeOut(500):alert("خطای سرور در هنگام حذف تگ رخ داده است. لطفا چند دقیقه دیگر امتحان کنید.")},"json").then(function(){preloader()})}function addTag(n){var t=$(n).val(),i;t>0&&(preloader(),i=$("#prdId").val(),$.post("/admin/add-product-tag",{tagId:t,productId:i},function(t){if(t>0){var i=$("option:selected",n).text();$("#currentTags ul").append('<li><span class="far fa-times-circle pointer" data-id="'+t+'" onclick="removeTag(this)" ><\/span><span class="xs uk-margin-small-right">'+i+"<\/span><\/li>");$("option:selected",n).remove()}else t==0&&alert("خطای سرور در هنگام افزودن تگ رخ داده است. لطفا چند دقیقه دیگر امتحان کنید.")},"json").then(function(){preloader()}))}function filterSwitch(n){let i=$(n).val(),t="";switch(i){case"name":t='<label class="uk-form-label">نام محصول را تایپ کنید<\/label><input type="text" name="param" class="uk-input uk-border-rounded" />';break;case"code":t='<label class="uk-form-label">کد محصول را تایپ کنید<\/label><input type="number" name="param" class="uk-input uk-border-rounded" />';break;case"discountRange":t='<div class="uk-grid-medium uk-child-width-1-1 uk-child-width-1-2@m" uk-grid><div><label>از<\/label><input class="uk-input uk-border-rounded" name="param1" type="number" min="0" max="100" /><\/div><div><label>تا<\/label><input class="uk-input uk-border-rounded" name="param2" type="number" min="0" max="100" /><\/div><\/div>';break;case"tag":preloader();t='<label class="uk-form-label">تگ مورد نظر خود را انتخاب کنید<\/label><select class="uk-select uk-border-rounded" id="param-select" name="param"><\/select>';$("#append-filter").html(t);$.post('@Url.Action("GetAllTags")',{},function(n){$.each(n,function(n,t){$("#param-select").append('<option value="'+t.id+'">'+t.name+"<\/option>")})},"json").then(function(){preloader()})}i!="tag"&&$("#append-filter").html(t)}function filter(){let n=$("select[name=filterBy]").val();if(n!=0){preloader();let n=$("#search-modal form").serialize();$.post("/admin/product",n,function(n){$("#append").html(n)},"html").then(function(){UIkit.modal("#search-modal").hide();preloader()})}else UIkit.notification({message:"لطفا نحوه فیلتر را انتخاب و مقدار آن را پر کنید.",status:"danger",pos:"bottom-center",timeout:6e3}),$("select[name=filterBy]").focus()}function opration(n,t){var i=$("#op-modal");i.find(".uk-modal-title").text(t);i.find("#gallery").attr("href","/admin/product-gallery/"+n);i.find("#tags").attr("onclick","getTags("+n+', "'+t+'")');i.find("#attr").attr("href","/admin/product-attr/"+n);i.find("#variant").attr("href","/admin/product-variant/"+n);UIkit.modal("#op-modal").show()}function toggleVariants(n){event.stopPropagation();$(n).find("i").toggleClass("fa-plus-circle").toggleClass("fa-minus-circle");$(n).parents("tr").next(".detail-row").fadeToggle(200)}$("#search-modal form").on("submit",function(n){n.preventDefault();filter()});